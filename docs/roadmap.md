# Дорожная карта и декомпозиция

## Этап 1. Архитектура и прототипы (1–2 недели)
- Архитектурная схема (Backend FastAPI, Frontend Next.js, DB, Cache, Object Storage, CI/CD)
- Доменные модели: Users, Objects, Routes, Bookings, Reviews, Complaints, Events
- Спецификация API (OpenAPI) для основных сущностей
- UX-макеты: главная, каталог, карточка, карта, личный кабинет, админ

## Этап 2. Бэкенд базовый (2 недели)
- Модели БД + миграции Alembic
- CRUD API: users, objects, bookings, reviews
- Авторизация заглушка + токены (до eGov)
- Интеграция Redis (сессии/кэш)

## Этап 3. Интерактивная карта и контент (2 недели)
- Интеграция Mapbox/OSM (frontend)
- Эндпоинты геопоиска и фильтры
- Загрузка медиа (Object Storage), генерация превью

## Этап 4. Бронирования и платежи (3–4 недели)
- Интеграция Freedom Travel (sandbox)
- Подбор жилья (Booking.com API, при наличии)
- Платежи: eGov Pay, Kaspi QR (sandbox), webhooks

## Этап 5. eGov Mobile авторизация (2 недели)
- OIDC flow, приём кода/токена, валидация
- Привязка профиля пользователя

## Этап 6. Жалобы/Отзывы/Рейтинги (2 недели)
- Эндпоинты жалоб, модерация в админ-панели
- Автоскоринг (формула, веса, cron)

## Этап 7. AI-ассистент и RAG (3–4 недели)
- Выбор LLM (внешний API vs локальный)
- Векторное хранилище (Pinecone/Milvus)
- Индексация контента DataHub
- Маршрутизация и планировщик поездок

## Этап 8. DataHub и аналитика (3 недели)
- Сбор телеметрии: посещаемость, загрузка маршрутов, события
- Дэшборд: тепловые карты, тренды, KPI

## Этап 9. PWA и мобильная версия (1–2 недели)
- PWA-манифест, офлайн-кэш
- Уведомления (web push)

## Этап 10. Безопасность и эксплуатация (непрерывно)
- WAF/rate-limit, аудит админ-операций
- Мониторинг (Prometheus/Grafana), алерты
- CI/CD пайплайн, e2e и нагрузочные тесты

## Критерии приёмки (сводно)
- Три языка (KZ/RU/EN), карта, бронирование (mock→prod), eGov, AI-планировщик, жалобы/рейтинги, аналитика, Docker-развёртывание
